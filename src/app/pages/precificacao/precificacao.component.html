<mat-toolbar color="primary">
  <span class="titulo-logo">MR</span>
  <span class="titulo-menu">Precificação de Produto</span>
</mat-toolbar>

<div class="form-container">
  <form [formGroup]="precificacaoForm" (ngSubmit)="onSubmit()" role="form" aria-label="Formulário de precificação de produto">
    
    <div>
      <label for="sku">SKU</label>
      <input 
        id="sku"
        formControlName="sku"
        placeholder="Inclua o código do produto e aguarde"
        [class.invalid]="isCampoInvalido('sku')"
        [attr.aria-invalid]="isCampoInvalido('sku')"
        aria-required="true"
      />
      <small class="error-msg" *ngIf="isCampoInvalido('sku') && precificacaoForm.get('sku')?.errors?.['required']">
        Este campo é obrigatório.
      </small>
    </div>

    <div>
      <label for="nomeProduto">Nome do Produto</label>
      <input id="nomeProduto" formControlName="nomeProduto" />
    </div>

    <div>
      <label for="precoSugeridoSTSP">Preço Sugerido (R$)</label>
      <input 
        id="precoSugeridoSTSP"
        type="number" 
        formControlName="precoSugeridoSTSP"
        step="0.01"
      />
    </div>

    <div>
      <label for="precoVenda">Preço Venda (R$)</label>
      <input 
        id="precoVenda"
        type="number"
        formControlName="precoVenda"
        step="0.01"
        min="0"
        [class.invalid]="isCampoInvalido('precoVenda')"
        [attr.aria-invalid]="isCampoInvalido('precoVenda')"
      />
      <small class="error-msg" *ngIf="isCampoInvalido('precoVenda') && precificacaoForm.get('precoVenda')?.errors?.['min']">
        O valor não pode ser negativo.
      </small>
    </div>

    <div>
      <label for="desconto">Desconto (%)</label>
      <input 
        id="desconto"
        type="number"
        formControlName="desconto"
        step="0.01"
        min="0"
        [class.invalid]="isCampoInvalido('desconto')"
        [attr.aria-invalid]="isCampoInvalido('desconto')"
      />
      <small class="error-msg" *ngIf="isCampoInvalido('desconto') && precificacaoForm.get('desconto')?.errors?.['min']">
        O valor não pode ser negativo.
      </small>
    </div>

    <div>
      <label for="precoDesconto">Preço com Desconto (R$)</label>
      <input 
        id="precoDesconto"
        type="number"
        formControlName="precoDesconto"
        step="0.01"
      />
    </div>

    <div>
      <label for="margemLiquida">Margem Líquida (%)</label>
      <input 
        id="margemLiquida"
        type="number"
        formControlName="margemLiquida"
        step="0.01"
      />
    </div>

    <div>
      <label for="margemBruta">Margem Bruta (%)</label>
      <input 
        id="margemBruta"
        type="number"
        formControlName="margemBruta"
        step="0.01"
      />
    </div>

    <div>
      <label for="lucro">Valor Lucro (R$)</label>
      <input 
        id="lucro"
        type="number"
        formControlName="lucro"
        step="0.01"
      />
    </div>

    <div>
      <label for="dataAlteracaoPreco">Data de Alteração do Preço</label>
      <input 
        id="dataAlteracaoPreco"
        type="date"
        formControlName="dataAlteracaoPreco"
      />
    </div>

    <div class="full-width">
      <button 
        class="btn-cancelar" 
        type="button" 
        (click)="cancelar()" 
        aria-label="Cancelar precificação"
      >
        Cancelar
      </button>

      <button 
        class="btn-salvar" 
        type="button" 
        (click)="calcularPreco()" 
        [disabled]="!botoesHabilitados"
        aria-label="Calcular preço sugerido"
      >
        Calcular Preço
      </button>

      <button 
        class="btn-salvar" 
        type="submit" 
        [disabled]="!botoesHabilitados"
        aria-label="Salvar precificação"
      >
        Salvar
      </button>
    </div>
  </form>
</div>

<footer class="footer">
  <p>© {{currentYear}} Magazine Rufino.</p>
</footer>

<app-loading *ngIf="loading"></app-loading>
